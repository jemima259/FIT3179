
  
{
  "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
  "width": 800,
  "height": 600,
  "title": "Trees planted over time",
  "data": {
    "url": "https://raw.githubusercontent.com/jemima259/FIT3179/main/2Trees__with_species_and_dimensions__Urban_Forest_.csv"
  }, 
  "transform" : [{"filter": "datum.Year_Planted > 1996"}],
"selection": {
   "family_highlight": {
     "type": "multi",
     "fields": ["Family"],
     "bind": "legend"
} 
},
  "mark": "line", 
  "encoding": {
    "x": {
      "field": "Year_Planted",
      "type": "temporal",
      "title": "Year Planted",
      "axis": {"tickCount": "year"},
      "scale": {"type": "time"}
    },
    
    "y": {
      "aggregate": "count",
      "field": "Family",
      "type": "quantitative",
      "title": "Trees Planted",
      "scale": {"type": "linear", "domain": [0, 6500]}
    },
    "layer": [
      {
        "mark": {
          "type": "text",
          "align": "right"
        },
        "encoding":{
          "text" : {"field": "Family", "type": "nominal"}
          },
          "color": {"value": "black"},
          "opacity":{
            "condition":{
              "test": "datum['Year_Planted'] == '1998' && datum.Family == 'Myrtaceae'",
              "value": 1
        }
        }

        
      }
    ],
    
    "color": {
      "field": "Family",
      "type": "nominal",
      "condition":{
        "test": "datum.Family != 'Myrtaceae'",
        "value": "lightgrey"
      }
    },
     "opacity": {
      "condition": {"selection": "family_highlight", "value": 0.6},
      "value": 0.2},
    "tooltip": [
      {"field": "Year_Planted",
      "type": "temporal",
      "title": "Date Planted"},
      {"aggregate": "count",
      "field": "Family",
      "title": "Trees Planted",
      "type": "quantitative",
      "format": ","}
    ]
  }}
